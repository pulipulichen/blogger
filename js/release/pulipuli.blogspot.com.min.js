/**
 * pulipuli.blogspot.com.min.js
 * pulipuli.blogspot.tw專用的JavaScript簡化版
 *
 * Compressed by Javascript Compressor
 * http://javascriptcompressor.com/
 * Shrink variables [v]
 * puliPostCatalog.js + puliBloggerDigest.js + jquery.lazyload.mini.js + jquery.blogger.infinitescroll.js + blogger.js
 */
if(typeof(is_blogger_fullpage)!='function'){is_blogger_fullpage=function(){var a=location.href.split("/");if(a.length>5&&a[4]!="label"&&a[0]!="file:")return true;else return false}}if(typeof($.create_id)!='function'){$.create_id=function(){return(new Date()).getTime()+''}}$.puliPostCatalog=function(B,C){if(is_blogger_fullpage()==false)return;$(function(){if(n==null)n="h4";if(B==null){if($('div.post-body .disable-post-catalog').length>0){return}var c=$('div.post-body:first > '+n+':first');if(c.length==0){return}var d=c.prev().filter('font');if(d.length>0)d.remove();var e=c.prev().filter('hr');if(e.length>0)e.remove();else{var f=c.prevAll("div:first");e=f.children(':last').filter('hr');if(e.length>0)e.remove()}B=$('<span></span>').insertBefore(c);B.attr('id','postcata'+$.create_id())}var g=jQuery(B);var h=g.attr("id");var j=jQuery(B).parents("div.post-body:first");if(j.find('.cate-title').length>0)return;var k=j.find("h4,h5");var l=[];var m={};for(var i=0;i<k.length;i++){var n=k.eq(i);var o=n.offset().top;m[o]=n;l.push(o)}l.sort(function(a,b){return a-b});k=[];for(var i=0;i<l.length;i++){var o=l[i];var n=m[o];k.push(n)}var p=h+"cataTitle";var q=jQuery("<div class='cata-title' style='width: 75%'>"+"<a name='"+p+"' id='"+p+"' /></div>");var r=jQuery('<a style="margin:0;padding:0;text-decoration:none;font-size:smaller;font-weight:normal;float:right;" href="#'+p+'"><sup>&lt;^&gt;</sup></a>');var s=jQuery("<ul></ul>");for(var i=0;i<k.length;i++){var t=k[i];var u=t.text();var v=h+"_anchor"+i;var w=jQuery("<a id='"+v+"' name='"+v+"' />");t.prepend(w);t.prepend(r.clone());var x=t.attr('tagName').toLowerCase();var y=jQuery("<li><a href='#"+v+"'>"+u+"</a></li>");if(x=='h4'){s.append(y)}else{var z=s.children('li:last');if(z.length==0){z=$('<li></li>').appendTo(s)}var A=z.children("ul:last");if(A.length==0){A=$('<ul></ul>').appendTo(z)}A.append(y)}}if(k.length!=0){B.append(q).append(s);B.prepend("<hr width='75%' />");B.append("<hr width='75%' />")}})};function puliBloggerDigest(H,I,J,K,L,M,N){var O=this;O.setDefaultValue=function(v,a){if(typeof(v)=="undefined")return a;else return v};O.wordMin=O.setDefaultValue(I,100);O.wordMax=O.setDefaultValue(J,200);O.langBlogURL=O.setDefaultValue(K,"文章網頁");O.langReadAll=O.setDefaultValue(L,"閱讀全文");O.langContiReadAll=O.setDefaultValue(M,"繼續閱讀全文");O.langShowDigest=O.setDefaultValue(N,"僅顯示摘要");O.delayTime=O.setDefaultValue(H,0);O.stop_tag=new Array;O.stop_tag[0]="img";O.stop_tag[1]="br";O.stop_chr=new Array;O.stop_chr[0]=" ";O.stop_chr[1]="\n";O.stop_chr[2]="\t";O.stop_chr[3]=">";O.stop_chr[4]="<";O.skip_tag=new Array;O.skip_tag[0]="script";O.skip_tag[1]="style";O.limit=null;O.doDegiest=function(a){O.doDigest(a)};O.doDigest=function(d){if(O.is_blogger_fullpage()==true){if(typeof(d)=="function")d();return}var e=jQuery("div.post-body");if(e.length==0){e=jQuery("div.post div.entry")}if(e.length==0){var f=jQuery("div.post");for(var i=0;i<f.length;i++){var g=f.eq(i).children(":not(a:first, h3.post-title:first, p.post-footer, :first):first");g.css("border","1px solid red");var e=jQuery('<div class="post-body"></div>').append(g);f.eq(i).children("h3.post-title:first").after(e)}e=jQuery("div.post-body")}var h=jQuery("div.post").find("a[title='permanent link']");if(h.length==0)h=jQuery("div.post").find("a.comment-link:last");e.hide();var j=function(a,i){var b=e.eq(i);var c=h.eq(i).attr("href");c=c.replace("#links","");O.digest_blogbody(b,c,i,function(){i++;if(i<a.length){setTimeout(function(){j(a,i)},0)}else{if(typeof(d)=="function")d()}})};j(e,0)};O.digest_blogbody=function(f,g,h,j){var k=function(){f.slideDown("fast",function(){if(typeof(j)=="function")j();return})};var l=O.wordMin;var m=O.wordMax;if(is_blogger_fullpage()){k();return}var n=f.find("textarea.entry-content-text:first");if(n.length==1){var o=n.text();n.remove();f.html(o)}blogitembody=f.html();id="postBodyAnchor"+h;this.id=id;this.url=g;this.contiReading=function(a,b){return'<div class="link_fullpost" style="margin: 5px;margin-bottom: 1em;">| <a onclick="pBD.digest_show(\''+this.id+'\')" title="'+a+'" href="javascript:void(0);">'+b+'</a> | <a href="'+this.url+'" title="post link">'+O.langBlogURL+'</a> |</div>'};var p=-1;var q="auto";if(q=="auto"){p=blogitembody.indexOf("<!--Hidden All-->",0);if(p!=-1||f.find("span.digest-mode.hidden-all").length!=0){p=0;q="hidden_all"}}if(q=="auto"){p=blogitembody.indexOf("<!--Show All-->",0);if(p!=-1||f.find("span.digest-mode.show-all").length!=0){p=blogitembody.length;q="show_all"}}if(q=="auto"){p=blogitembody.indexOf("<!--Digest-->",0);digest_point2=blogitembody.indexOf("<!--more-->",0);digest_point3=blogitembody.indexOf(">DIGEST<",0);digest_point4=blogitembody.indexOf("<!-- Digest -->",0);if(p!=-1){p=p+13;q="digest"}if(digest_point2!=-1&&digest_point2>p){p=digest_point2+11;q="digest"}if(digest_point3!=-1&&digest_point3>digest_point2){p=digest_point3+2;q="digest"}if(digest_point4!=-1&&digest_point4>digest_point3){p=digest_point3+15;q="digest"}}if(q!="auto"){if(blogitembody.toLowerCase().substr(blogitembody.length-56,56)=='<div style="clear:both; padding-bottom: 0.25em;"></div>')var r=blogitembody.length-56;else var r=blogitembody.length;if(p<r&&p!=-1){if(q!="hidden_all"||q!="digest")continue_reading1="……";else continue_reading1="";if(q=="hidden_all"){continue_reading2=this.contiReading("show all",O.langReadAll)}else if(q=="digest"){continue_reading2=this.contiReading("show all",O.langContiReadAll)}hidden_reading=this.contiReading("show only digest",O.langShowDigest);blogitembody_digest_ohter=blogitembody.substr(0,p)+'<a id="'+id+'-digest_point" name="'+id+'-digest_point"></a>'+blogitembody.substr(p,blogitembody.length-p);blogitembody_digest_ohter='<div class="post_hidden puli-blogger-digest" id="'+id+'-hidden" style="display:none;clear:both">'+blogitembody_digest_ohter+hidden_reading+'</div>'}else{continue_reading1="";continue_reading2="";blogitembody_digest_ohter=""}var s="";if(q=="digest"){var o=blogitembody.substr(0,p);each_tag=o.split("<");for(var i=1;i<each_tag.length;i++){if(each_tag[i].substr(0,1)=="/"||each_tag[i].substr(0,1)=="!")continue;temp=each_tag[i].split(" ",2);temp2=each_tag[i].split(">",2);if(temp[0].length<temp2[0].length)tag=temp[0];else tag=temp2[0];s="</"+tag+">"+s}}blogitembody_digest=blogitembody.substr(0,p)+continue_reading1+s;f.html('<div name="'+id+'-show" id="'+id+'-show" class="post_show puli-blogger-digest" style="clear:both;">'+blogitembody_digest+continue_reading2+'</div>').after(blogitembody_digest_ohter);k();return}if(f.text().length<m){k();return}if(blogitembody.length<m){k();return}var t=0;var u="";var v=new Array;tag_i=0;var w=0;var x=O.stop_tag;var y="false";var z=O.stop_chr;var A="false";var B=O.skip_tag;var C="";var D="";var E=1;var F=function(a,i,b){if(!(i<a.length&&b==-1)){G(i,v);return}D=a.substr(i,1);if(D=="<"){is_skip_tag="false";for(sk_i=0;sk_i<B.length;sk_i++){C=a.substr(eval(i+1),B[sk_i].length);if(C==B[sk_i]){i=a.indexOf("</"+B[sk_i]+">",i);i=eval(i)+B[sk_i].length+3;is_skip_tag="true";break}}if(is_skip_tag=="true"){i++;setTimeout(function(){F(a,i,b)},E);return}tagname_point1=a.indexOf(" ",i);tagname_point2=a.indexOf(">",i);if(tagname_point2<tagname_point1||tagname_point1==-1)tagname_point=tagname_point2;else tagname_point=tagname_point1;tagname=a.substr(eval(i+1),tagname_point-eval(i+1));y="false";for(st_i=0;st_i<x;st_i++){if(tagname==x[st_i]){y="true";break}}if(y=="false"){v[tag_i]=tagname;tag_i++}i=a.indexOf(">",eval(i));i++;setTimeout(function(){F(a,i,b)},E);return}A="false";for(sc_i=0;sc_i<z.length;sc_i++){if(D==z[sc_i]){A="true";break}}if(A=="false"&&D!="<"){t++}if(t>m+v.length){G(i,v);return}else{i++;setTimeout(function(){F(a,i,b)},E);return}};var G=function(i,a){p=eval(i+1);var b=blogitembody.indexOf("</",p);if(b-p<l&&b!=-1)p=b;s="";for(var i=(tag_i-1);i>-1;i--){if(typeof(a[i])!='undefined'&&a[i].substr(0,1)!="/")s=s+'</'+a[i]+'>'}if(blogitembody.toLowerCase().substr(blogitembody.length-56,56)=='<div style="clear:both; padding-bottom: 0.25em;"></div>'){var c=blogitembody.length-(tag_i*5)-56}else var c=blogitembody.length-(tag_i*5);if(p<c&&p!=-1){continue_reading1="……";continue_reading2=this.contiReading("show all",O.langContiReadAll);hidden_reading=this.contiReading("show only digest",O.langShowDigest);blogitembody_digest_ohter=blogitembody.substr(0,p)+'<a id="'+id+'-digest_point" name="'+id+'-digest_point"></a>'+blogitembody.substr(p,blogitembody.length-p);blogitembody_digest_ohter='<div class="post_hidden puli-blogger-digest" id="'+id+'-hidden" style="display:none;clear:both;">'+"<textarea class='post_hidden text'>"+blogitembody_digest_ohter+"</textarea>"+hidden_reading+'</div>'}else{continue_reading1="";continue_reading2="";blogitembody_digest_ohter=''}blogitembody_digest=blogitembody.substr(0,p)+continue_reading1+s;var d=jQuery('<div class="post_show puli-blogger-digest" name="'+id+'-show" id="'+id+'-show" style="clear:both;"></div>').append(blogitembody_digest).append(continue_reading2);d.find("script").remove();f.html(d);if(!(blogitembody_digest_ohter==""||typeof(blogitembody_digest_ohter)=="undefined")){var e=jQuery(blogitembody_digest_ohter);f.append(e)}k();return};F(blogitembody,0,p)};O.digest_show=function(a){if(document.getElementById(a+"-show").style.display==""||document.getElementById(a+"-show").style.display=="block"){jQuery("#"+a+"-show").hide();var b=jQuery("#"+a+"-hidden");var c=b.children("textarea.post_hidden.text");if(c.length==1){var d=c.text();c.remove();b.prepend(jQuery("<div>"+d+"</div>"))}b.show()}else{jQuery("#"+a+"-hidden").hide();jQuery("#"+a+"-show").show();document.getElementById(a+"-show").parentNode.parentNode.scrollIntoView(true)}return false};O.is_blogger_fullpage=function(){var a=location.href.split("/");if(a.length>5&&a[4]!="label"&&a[0]!="file:")return true;else return false};return O}(function($){$.fn.lazyload=function(e){var f={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(e){$.extend(f,e)}var g=this;if("scroll"==f.event){$(f.container).bind("scroll",function(b){var c=0;g.each(function(){if($.abovethetop(this,f)||$.leftofbegin(this,f)){}else if(!$.belowthefold(this,f)&&!$.rightoffold(this,f)){$(this).trigger("appear")}else{if(c++>f.failurelimit){return false}}});var d=$.grep(g,function(a){return!a.loaded});g=$(d)})}this.each(function(){var b=this;if(undefined==$(b).attr("original")){$(b).attr("original",$(b).attr("src"))}if("scroll"!=f.event||undefined==$(b).attr("src")||f.placeholder==$(b).attr("src")||($.abovethetop(b,f)||$.leftofbegin(b,f)||$.belowthefold(b,f)||$.rightoffold(b,f))){if(f.placeholder){$(b).attr("src",f.placeholder)}else{$(b).removeAttr("src")}b.loaded=false}else{b.loaded=true}$(b).one("appear",function(){if(!this.loaded){$("<img />").bind("load",function(){$(b).hide().attr("src",$(b).attr("original"))[f.effect](f.effectspeed);b.loaded=true}).attr("src",$(b).attr("original"))}});if("scroll"!=f.event){$(b).bind(f.event,function(a){if(!b.loaded){$(b).trigger("appear")}})}});$(f.container).trigger(f.event);return this};$.belowthefold=function(a,b){if(b.container===undefined||b.container===window){var c=$(window).height()+$(window).scrollTop()}else{var c=$(b.container).offset().top+$(b.container).height()}return c<=$(a).offset().top-b.threshold};$.rightoffold=function(a,b){if(b.container===undefined||b.container===window){var c=$(window).width()+$(window).scrollLeft()}else{var c=$(b.container).offset().left+$(b.container).width()}return c<=$(a).offset().left-b.threshold};$.abovethetop=function(a,b){if(b.container===undefined||b.container===window){var c=$(window).scrollTop()}else{var c=$(b.container).offset().top}return c>=$(a).offset().top+b.threshold+$(a).height()};$.leftofbegin=function(a,b){if(b.container===undefined||b.container===window){var c=$(window).scrollLeft()}else{var c=$(b.container).offset().left}return c>=$(a).offset().left+b.threshold+$(a).width()};$.extend($.expr[':'],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);(function(f,$,g){$.infinitescroll=function infscr(a,b,c){this.element=$(c);this._create(a,b)};$.infinitescroll.defaults={callback:function(){},debug:false,behavior:g,binder:$(f),nextSelector:"div.navigation a:first",loadMsgSelector:null,loadingMsgRevealSpeed:'fast',loadingImg:"https://sites.google.com/site/puddingchen35/blogger-image/loading.gif",loadingText:"<em>Loading the next set of posts...</em>",loadingStart:g,loadingEnd:g,donetext:"<em>Congratulations, you've reached the end of the internet.</em>",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:g,dataType:'html',appendCallback:true,bufferPx:40,orientation:'height',errorCallback:function(){},currPage:1,infid:0,isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,pixelsFromNavToBottom:g,pagesLoaded:null,path:g,loadingMsg:g};$.infinitescroll.prototype={_binding:function infscr_binding(a){var b=this;if(a!=='bind'&&a!=='unbind'){this._debug('Binding value  '+a+' not valid');return false}if(a=='unbind'){(this.options.binder).unbind('smartscroll.infscr.'+b.options.infid)}else{(this.options.binder)[a]('smartscroll.infscr.'+b.options.infid,function(){b.scroll()})};this._debug('Binding',a)},_create:function infscr_create(b,c){if(!this._validate(b)){return false}var d=this.options=$.extend({},$.infinitescroll.defaults,b),relurl=/(.*?\/\/).*?(\/.*)/,path=this._get_next_path();d.contentSelector=d.contentSelector||this.element;d.loadMsgSelector=d.loadMsgSelector||d.contentSelector;if(!path){this._debug('Navigation selector not found');return}d.path=this._determinepath(path);d.loadingMsg=$('<div id="infscr-loading" style="text-align:center;"><img alt="Loading..." src="'+d.loadingImg+'" /><div><a class="loading-msg" href="">'+d.loadingText+'</a></div></div>');var e=this;d.setupLoadingMsgLink=function(){var a=e._get_next_path();if(a.length>0&&typeof(d.loadingMsg)!="undefined"){d.loadingMsg.find(".loading-msg").attr("href",a[0])}};d.setupLoadingMsgLink();(new Image()).src=d.loadingImg;d.pixelsFromNavToBottom=$(document).height()-$(d.navSelector).offset().top;d.loadingStart=d.loadingStart||function(){$(d.navSelector).hide();d.loadingMsg.appendTo(d.loadMsgSelector).show(d.loadingMsgRevealSpeed,function(){d.setupLoadingMsgLink();beginAjax(d)})};d.loadingEnd=d.loadingEnd||function(){d.loadingMsg.fadeOut('normal')};d.callback=c||function(){};this._setup()},_debug:function infscr_debug(){if(this.options.debug){return f.console&&console.log.call(console,arguments)}},_determinepath:function infscr_determinepath(a){return this._get_next_path();var b=this.options;if($.isFunction(b.pathParse)){this._debug('pathParse');return[a]}else if(a.match(/^(.*?)\b2\b(.*?$)/)){a=a.match(/^(.*?)\b2\b(.*?$)/).slice(1)}else if(a.match(/^(.*?)2(.*?$)/)){if(a.match(/^(.*?page=)2(\/.*|$)/)){a=a.match(/^(.*?page=)2(\/.*|$)/).slice(1);return a}a=a.match(/^(.*?)2(.*?$)/).slice(1)}else{if(a.match(/^(.*?page=)1(\/.*|$)/)){a=a.match(/^(.*?page=)1(\/.*|$)/).slice(1);return a}else{this._debug('Sorry, we couldn\'t parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.');b.isInvalidPage=true}}this._debug('determinePath',a);return a},_error:function infscr_error(a){var b=this.options;if(a!=='destroy'&&a!=='end'){a='unknown'}this._debug('Error',a);if(a=='end'){this._showdonemsg()}b.isDone=true;b.currPage=1;b.isPaused=false;this.binding('unbind')},_loadcallback:function infscr_loadcallback(a,b){var c=this.options,callback=this.options.callback,result=(c.isDone)?'done':(!c.appendCallback)?'no-append':'append',frag;switch(result){case'done':this._showdonemsg();return false;break;case'no-append':if(c.dataType=='html'){b='<div>'+b+'</div>';b=$(b).find(c.itemSelector)};break;case'append':var d=a.children();if(d.length==0){return this._error('end')}frag=document.createDocumentFragment();while(a[0].firstChild){frag.appendChild(a[0].firstChild)}this._debug('contentSelector',$(c.contentSelector)[0]);$(c.contentSelector)[0].appendChild(frag);b=d.get();break}c.loadingEnd.call($(c.contentSelector)[0],c);if(c.animate){var e=$(f).scrollTop()+$('#infscr-loading').height()+c.extraScrollPx+'px';$('html,body').animate({scrollTop:e},800,function(){c.isDuringAjax=false})}if(!c.animate)c.isDuringAjax=false;callback.call($(c.contentSelector)[0],b)},_nearbottom:function infscr_nearbottom(){var a=this.options,pixelsFromWindowBottomToBottom=0+$(document).height()-(a.binder.scrollTop())-$(f).height();this._debug('math:',pixelsFromWindowBottomToBottom,a.pixelsFromNavToBottom);return(pixelsFromWindowBottomToBottom-a.bufferPx<a.pixelsFromNavToBottom)},_pausing:function infscr_pausing(a){var b=this.options;if(a!=='pause'&&a!=='resume'&&a!==null){this._debug('Invalid argument. Toggling pause value instead')};a=(a&&(a=='pause'||a=='resume'))?a:'toggle';switch(a){case'pause':b.isPaused=true;break;case'resume':b.isPaused=false;break;case'toggle':b.isPaused=!b.isPaused;break}this._debug('Paused',b.isPaused);return false},_setup:function infscr_setup(){var a=this.options;(!a.behavior)?this._binding('bind'):this['_setup_'+a.behavior]();return false},_showdonemsg:function infscr_showdonemsg(){var a=this.options;a.loadingMsg.find('img').hide().parent().find('div').html(a.donetext).animate({opacity:1},2000,function(){$(this).parent().slideUp('normal')});a.errorCallback.call($(a.contentSelector)[0],'done')},_validate:function infscr_validate(a){for(var b in a){if(b.indexOf&&b.indexOf('Selector')>-1&&$(a[b]).length===0){this._debug('Your '+b+' found no elements.');return false}return true}},_get_next_path:function(){var a=this.options;var b=$(a.nextSelector);var c=b.attr('href');c=[c];return c},bind:function infscr_bind(){this._binding('bind')},destroy:function infscr_destroy(){this.options.isDestroyed=true;return this._error('destroy')},pause:function infscr_pause(){this._pausing('pause')},resume:function infscr_resume(){this._pausing('resume')},retrieve:function infscr_retrieve(d){var e=this,opts=e.options,path=this._get_next_path(),box,frag,desturl,method,condition,d=d||null,getPage=(!!d)?d:opts.currPage;beginAjax=function infscr_ajax(c){c.currPage++;e._debug('heading into ajax',path);box=$(c.contentSelector).is('table')?$('<tbody/>'):$('<div/>');desturl=($.isFunction(c.pathParse))?c.pathParse(path.join('2'),c.currPage):path.join(c.currPage);method=(c.dataType=='html'||c.dataType=='json')?c.dataType:'html+callback';if(c.appendCallback&&c.dataType=='html')method+='+callback';switch(method){case'html+callback':e._debug('Using HTML via .load() method');box.load(desturl+' '+c.itemSelector,null,function infscr_ajax_callback(a){e._loadcallback(box,a)});break;case'html':case'json':e._debug('Using '+(method.toUpperCase())+' via $.ajax() method');$.ajax({url:desturl,dataType:c.dataType,complete:function infscr_ajax_callback(a,b){condition=(typeof(a.isResolved)!=='undefined')?(a.isResolved()):(b==="success"||b==="notmodified");(condition)?e._loadcallback(box,a.responseText):e._error('end')}});break}};if(opts.isDestroyed){this._debug('Instance is destroyed');return false};opts.isDuringAjax=true;opts.loadingStart.call($(opts.contentSelector)[0],opts)},scroll:function infscr_scroll(){var a=this.options;if(a.isDuringAjax||a.isInvalidPage||a.isDone||a.isDestroyed||a.isPaused)return;if(!this._nearbottom())return;this.retrieve()},toggle:function infscr_toggle(){this._pausing()},unbind:function infscr_unbind(){this._binding('unbind')}};$.fn.infinitescroll=function infscr_init(b,c){var d=typeof b;switch(d){case'string':var e=Array.prototype.slice.call(arguments,1);this.each(function(){var a=$.data(this,'infinitescroll');if(!a){return false}if(!$.isFunction(a[b])||b.charAt(0)==="_"){return false}a[b].apply(a,e)});break;case'object':this.each(function(){var a=$.data(this,'infinitescroll');if(a){}else{$.data(this,'infinitescroll',new $.infinitescroll(b,c,this))}});break}return this};var h=$.event,scrollTimeout;h.special.smartscroll={setup:function(){$(this).bind("scroll",h.special.smartscroll.handler)},teardown:function(){$(this).unbind("scroll",h.special.smartscroll.handler)},handler:function(a,b){var c=this,args=arguments;a.type="smartscroll";if(scrollTimeout){clearTimeout(scrollTimeout)}scrollTimeout=setTimeout(function(){jQuery.event.handle.apply(c,args)},b==="execAsap"?0:100)}};$.fn.smartscroll=function(a){return a?this.bind("smartscroll",a):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);var linkwithin_site_id=226251;function digest_show(a){if(document.getElementById(a+"-show").style.display==""||document.getElementById(a+"-show").style.display=="block"){jQuery("#"+a+"-show").hide();jQuery("#"+a+"-hidden").show()}else{jQuery("#"+a+"-hidden").hide();jQuery("#"+a+"-show").show();document.getElementById(a+"-show").parentNode.parentNode.scrollIntoView(true)}return false}function sidebar_control(a){if(jQuery("#main").css("display")!="none"&&jQuery("#sidebar-wrapper").css("display")!="none"){if(a==0)a="max";else if(a==1)a="hidden"}else if(a==0&&jQuery("#main").css("display")!="none")a="normal";else if(a==1&&jQuery("#sidebar-wrapper").css("display")!="none")a="normal";else return;var b="65%";var c="30%";var d="97%";var e="0%";var f="#main";jQuery(f).show();jQuery("#sidebar-wrapper").show();if(a=='normal'){jQuery("#sidebar-wrapper").animate({width:c},500);jQuery(f).animate({width:b},500)}else if(a=='hidden'){jQuery("#sidebar-wrapper").animate({width:e},500,"linear",function(){jQuery("#sidebar-wrapper").hide()});jQuery(f).animate({width:d},500)}else if(a=='max'){jQuery(f).animate({width:e},500,"linear",function(){jQuery(f).hide()});jQuery("#sidebar-wrapper").animate({width:d},500,"linear")}}function is_blogger_fullpage(){var a=location.href.split("/");if(a.length>5&&a[4]!="label"&&a[0]!="file:")return true;else return false}function is_blogger_search(){return((location.href.indexOf(".blogspot.com/search?")>-1)||(location.href.indexOf(".blogspot.com/search/")>-1))}function is_blogger_label(){return(location.href.indexOf(".blogspot.com/search/label/")>-1)}function is_blogger_archive(){var a="_archive.html";var b=location.href;return(b.substring(b.length-a.length,b.length)==a)}function generateBreadcrumbs(a){if(is_blogger_fullpage()==false)return"";var b=location.href.toLowerCase();var c=b.lastIndexOf('/',b.indexOf('.html'));var d=parseInt(b.substr(c-7,4));var e='<a href="'+jQuery("h1.title a").attr("href")+'">首頁</a>';var f=e+' &gt; <a href="/search?updated-min='+d;f+='-01-01T00%3A00%3A00-08%3A00&updated-max='+(d+1);f+='-01-01T00%3A00%3A00-08%3A00">'+d+'年</a>';var g=b.substr(c-2,2);if(g.substr(0,1)=='0')g=g.substr(1,1);g=parseInt(g);var h=d;var i=g+1;if(i>11){i=1;h+=1}var j=g;if(g<10)j="0"+g;var k=i;if(i<10)k="0"+i;f+=' &gt; <a href="/search?updated-min='+d;f+='-'+j+'-01T00%3A00%3A00-08%3A00&updated-max='+h;f+='-'+k+'-01T00%3A00%3A00-08%3A00">'+j+'月</a>';return"<span class='breadcrumbs'>"+f+"</span>"}function postCatalog(a,b){count=location.href.split('/');if((count.length!=1&&!(count.length>5&&count[4]!="label"))||count[0]=="file:")return;if(typeof(b)=="undefined")b="h4";var c=jQuery(a);var d=c.attr("id");var e=jQuery(a).parents("div.post-body:first");var f=e.find("h4,h5");var g=d+"cataTitle";var h=jQuery("<div class='cata-title' style='width: 75%'>目錄<a name='"+g+"' id='"+g+"' /></div>");var j=jQuery('<a style="margin:0;padding:0;text-decoration:none;font-size:smaller;font-weight:normal;" href="#'+g+'"><sup>&lt;^&gt;</sup></a>');var k=jQuery("<ul></ul>");for(var i=0;i<f.length;i++){var l=f.eq(i);var m=l.text();var n=d+"_anchor"+i;var o=jQuery("<a id='"+n+"' name='"+n+"' />");l.append(o);var p=l.attr('tagName').toLowerCase();var q=jQuery("<li><a href='#"+n+"'>"+m+"</a></li>");if(p=='h4'){k.append(q)}else{var r=k.find('li:last');if(r.length==0){r=$('<li></li>').appendTo(k)}var s=r.find("ul:last");if(s.length==0){s=$('<ul></ul>').appendTo(r)}s.append(q)}l.append(j.clone())}if(f.length!=0){e.prepend("<hr width='75%' />");e.prepend(k);e.prepend(h)}}function RemoveDuplicatedPosts(b){function contains(a,e){for(var j=0;j<a.length;j++)if(a[j]==e)return true;return false}var c=new Array(0);var d=new Array(0);var f=new Array(0);for(var i=0;i<relatedUrls.length;i++){if(!contains(c,relatedUrls[i])&&b!=relatedUrls[i]){c.length+=1;c[c.length-1]=relatedUrls[i];d.length+=1;d[d.length-1]=relatedTitles[i];f.length+=1;f[f.length-1]=relatedDates[i]}}relatedTitles=d;relatedUrls=c;relatedDates=f}function RelatedLabels(a){if(typeof(a.feed.entry)=="undefined"||a.feed.entry==null)return;for(var i=0;i<a.feed.entry.length;i++){var b=a.feed.entry[i];relatedTitles[relatedPostsNum]=b.title.$t;relatedDates[relatedPostsNum]=b.published.$t.substr(0,10);for(var j=0;j<b.link.length;j++){if(b.link[j].rel=='alternate'){relatedUrls[relatedPostsNum]=b.link[j].href;relatedPostsNum++;break}}}}function ShowRelatedPosts(a){RemoveDuplicatedPosts(a);var r=Math.floor((relatedTitles.length-1)*Math.random());var i=0;var b="";if(relatedTitles.length>0){b='<div style="margin-top: 1em;">相關連結: <ul>';while(i<relatedTitles.length&&i<5){b=b+'<li><a href="'+relatedUrls[r]+'">'+relatedTitles[r]+'</a> - '+relatedDates[r]+'</li>';if(r<relatedTitles.length-1)r++;else r=0;i++}b=b+'</ul></div>'}return b}function compareentry(a,b){order=Date.parse(a.published.$t.replace(/^(\d{4})-(\d{2})-(\d{2})T([0-9:]*)([.0-9]*)(.)(.*)$/,'$1/$2/$3 $4 GMT'))-Date.parse(b.published.$t.replace(/^(\d{4})-(\d{2})-(\d{2})T([0-9:]*)([.0-9]*)(.)(.*)$/,'$1/$2/$3 $4 GMT'));return 0-order}function handlePostspulipuli(a){if(document.getElementById("newpostspulipuli")==null)return;var b='<h2></h2>';if(b=='<h2></h2>')b='';var c=b+'<ul id="Feed001_feedItemListDisplay">';var d=10;var f='';var g="%timestamp%<br/>%title%";try{var h=a.feed.entry.sort(compareentry)}catch(e){}for(var i=0,post;post=h[i];i++){if(i>=d)break;var b=post.title.$t;if(f!=""&&b.length>f)b=b.substr(0,f)+"...";var j=post.link[4].href;var k=post.summary.$t;var l=k.split('"');k=l.join('&quot;');var l=k.split('<br />');k=l.join('&nbsp;');var l=k.split('<');k=l.join('&lt;');var l=k.split('>');k=l.join('&gt;');var m='<a href="'+j+'" title="'+k+'">'+b+'</a>';var n=post.author[0].name.$t;var o=post.published.$t.substr(0,10);var p=g.replace("%title%",m).replace("%timestamp%",o).replace("%authorname%",n);c+='<li><span class="item-title">'+p+'</span></li>'}c+="</ul>";document.getElementById("newpostspulipuli").innerHTML=c}function handleCommentspulipuli(a){if(document.getElementById("newcommentspulipuli")==null)return;var b='<ul id="Feedpulipuli_feedItemListDisplay">';var c=10;var f='20';var g="%Y%-%M%-%D% %authorname%<br/>%comment%";try{var h=a.feed.entry.sort(compareentry)}catch(e){}for(var i=0,post;post=h[i];i++){if(i>=c)break;var k=post.content.$t;k=k.replace("\u003CBR/\u003E","\n");var l=k.split('<br />');k=l.join('&nbsp;\n');l=k.split('<br/>');k=l.join('&nbsp;\n');l=k.split('<br>');k=l.join('&nbsp;\n');l=k.split('"');k=l.join('&quot;');l=k.split('<');k=l.join('&lt;');l=k.split('>');k=l.join('&gt;');var n=k;l=n.split('&nbsp;');n=l.join(' ');if(f!=""&&n.length>f)n=n.substr(0,f)+"...";var o="";for(var j=0;j<n.length;j++){var p=n.substr(j,1);if(p=="<"){var q=n.indexOf(">",j);if(q!=-1)j=q;continue}else o=o+p}n=o;var r=post.link[2].href;var s='<a href="'+r+'" title="'+k+'">'+n+'</a>';var t=post.author[0].name.$t;var u=post.published.$t.substr(0,10);var y=u.substr(0,4);var m=u.substr(5,2);var d=u.substr(8,2);var v=g.replace("%comment%",s).replace("%Y%",y).replace("%M%",m).replace("%D%",d).replace("%authorname%",t);b+='<li><span class="item-title">'+v+'</span></li>'}b+="</ul>";document.getElementById("newcommentspulipuli").innerHTML=b}function handleGuestbookPulipuli(a){if(document.getElementById("pulipuli_guestbook")==null)return;document.getElementById("pulipuli_guestbook").innerHTML='';var b='<ul id="Feedpulipuli_guestbookDisplay">';var c=20;var f='20';var g="<span class='date'>%Y%-%M%-%D%</span> <strong>%authorname%</strong>: %comment%";try{var h=a.feed.entry.sort(compareentry)}catch(e){}var k=null;for(var i=0,post;post=h[i];i++){if(i==0)k=post;if(i>=c)break;var l=post.content.$t;var n=l.replace("\u003CBR/\u003E","<br />\n");var o="";for(var j=0;j<l.length;j++){var p=l.substr(j,1);if(p=="<"){var q=l.indexOf(">",j);if(q!=-1)j=q;continue}else o=o+p}l=o;var r="";if(typeof(post.link[2])!="undefined")r=post.link[2].href;var s=n;var t=post.author[0].name.$t;if(t=='Anonymous')t='匿名';if(t=='布丁布丁吃布丁'){t='<img src="http://1.bp.blogspot.com/_yr4MQB4zDus/SZ4Mb30N0aI/AAAAAAAAFUg/3OGhwhzBUOg/S45/" style="float:left;margin-right: 5px;width:20px; height: 20px;display:block;" border="0" /> '+t}var u='';if(typeof(post.author[0].uri)!='undefined'){u=post.author[0].uri.$t;t='<a href="'+u+'" target="_blank">'+t+'</a>'}var v=post.published.$t.substr(0,10);var y=v.substr(0,4);var m=v.substr(5,2);var d=v.substr(8,2);var w=g.replace("%comment%",s).replace("%Y%",y).replace("%M%",m).replace("%D%",d).replace("%authorname%",t);var x=0;if(i%2==1)x=1;b+='<li class="guest-book-li guest-book-li-'+x+'"><span class="item-title">'+w+'</span></li>'}var z='';var A='';var B='';if(k!=null){r=k.link[0].href;var C=r.split('/');var D=C[4];var E=C[5];var F=k.link[2].href;var G=F.indexOf('.com/');F=F.substring(0,G+5);A=F+'feeds/'+E+'/comments/default';z='https://www.blogger.com/comment.g?blogID='+D+'&postID='+E;B="$.getScript('"+F+"feeds/"+E+"/comments/full?alt=json-in-script&callback=handleGuestbookPulipuli')"}if(post=h[i]){r=z;b+='<li class="guest-book-li readmore"><span class="item-title">'+'<a href="'+r+'#comments" target="guestbook_write">閱讀全部的留言</a>'+'</span></li>'}b+="</ul>";b+='<div class="guestbook-write">'+' <a href="'+A+'" style="float:right;"><img src="http://3.bp.blogspot.com/_yr4MQB4zDus/Ru35yvgloDI/AAAAAAAABOQ/bbtw-pQhpOk/s200/rss.gif" border="0" /></a>'+' <a href="'+z+'" class="write" target="guestbook_write">撰寫留言</a>'+' <a class="write" onclick="'+B+'">重新讀取</a>'+'</div>';document.getElementById("pulipuli_guestbook").innerHTML=b}function openIframeDiv(a){var b=jQuery(a);if(b.hasClass("iframe-div")==false)b=b.parents(".iframe-div:first");var c=b.find(".src").attr("value");var d=b.find(".frameborder").attr("value");var e=b.find(".width").attr("value");var f=b.find(".height").attr("value");var g=jQuery("<iframe></iframe>").insertAfter(b);b.remove();g.attr("src",c).attr("frameborder",d).attr("width",e).attr("height",f)}function getScript(a,b){jQuery.ajax({url:a,dataType:'script',cache:true,success:b})}function blogAjax(){var s=function(a){if(typeof(a)=="function")a()};this.ajaxFunction=new Array;this.ajaxFunction.push(function(h){var j=function(a){var b=a.attr("src");var c=a.attr("width");var d=a.attr("height");var e=a.attr("frameborder");var f=b;if(f.length>50){f=f.substr(0,50)+"..."}var g=jQuery("<div><table onclick='openIframeDiv(this)'><tbody><tr><td valign='top'><img src='http://3.bp.blogspot.com/_yr4MQB4zDus/TA_RfdTE-TI/AAAAAAAAGw4/T1ewljZ9sSU/s320/stock_insert-floating-frame.png' /></td><td>請點此開啟內嵌網頁"+f+"</td></tr></tbody></table></div>").addClass("iframe-div").append("<input type='hidden' class='width' value='"+c+"' />").append("<input type='hidden' class='height' value='"+d+"' />").append("<input type='hidden' class='src' value='"+b+"' />").append("<input type='hidden' class='frameborder' value='"+e+"' />").attr("onclick","openIframeDiv(this)").insertAfter(a);a.remove()};var k="?imgmax=800";var l=function(a){for(var i=0;i<a.length;i++){var b=a.eq(i);var c=b.attr("src");if(typeof(c)=="undefined")continue;var d=c.length;if(c.substring(d-k.length,d)==k){c=c.substring(0,d-k.length);b.attr("src",c)}}};if(is_blogger_fullpage()==false){var m=jQuery("div.blog-posts div.post .entry-content-text");for(var e=0;e<m.length;e++){var n=jQuery("<div></div>").html(m.eq(e).text());var o=n.find("iframe");for(var i=0;i<o.length;i++){var p=o.eq(i);j(p)}var q=n.find("img");l(q);m.eq(e).text(n.html())}}else{var o=jQuery("div.post-body iframe");for(var i=0;i<o.length;i++){var p=o.eq(i);var r=p.attr("src");var k="http://www.facebook.com/plugins/like.php";if(r.substr(0,k.length)==k)continue;j(p)}var q=jQuery("div.post-body img");l(q)}s(h)});this.ajaxFunction.push(function(a){$("#main .blog-posts .post-body img").lazyload({effect:"fadeIn",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABHNCSVQICAgIfAhkiAAAAA1JREFUCJljOHTo0H8AB9YDRlccwe4AAAAASUVORK5CYII%3D"});s(a)});this.ajaxFunction.push(function(c){if(is_blogger_fullpage()==false){$('#main-wrapper .main.section:first').infinitescroll({navSelector:"#main-wrapper:last div.blog-feeds, #main-wrapper:last div.blog-pager:last",nextSelector:"#main-wrapper:last .widget.Blog div.blog-pager:last a.blog-pager-older-link",itemSelector:"#main-wrapper .widget.Blog:first",loadingText:"下一頁讀取中……"},function(a){var b=$(a);if(b.find("a.blog-pager-older-link").length==0){$(window).unbind('.infscr');b.find(".blog-pager").hide();return}b.find(".status-msg-wrap").hide();b.find(".blog-pager").hide()})}s(c)});this.ajaxFunction.push(function(a){if(is_blogger_search()==true||is_blogger_label()==true){s(a);return}else if(is_blogger_fullpage()==false){pBD=puliBloggerDigest();pBD.delayTime=500;pBD.wordMin=50;pBD.wordMax=100;pBD.langBlogURL="文章連結";pBD.langReadAll="閱讀全文";pBD.langContiReadAll="繼續閱讀";pBD.langShowDigest="顯示摘要";pBD.doDigest();setTimeout(function(){s(a)},500);return}else{s(a);return}});this.ajaxFunction.push(function(a){if(is_blogger_fullpage())$.puliPostCatalog();s(a)});this.ajaxFunction.push(function(a){var b=jQuery("<div></div>").addClass("sidebar-controller");var c=jQuery("<span onclick='sidebar_control(0)' > &lt; Side</span>").css("cursor","pointer").css("font-weight","bold").hover(function(){this.style.color="white"},function(){this.style.color="#CCCCCC"});var d=jQuery("<span onclick='sidebar_control(1)' >bar &gt; </span>").css("cursor","pointer").css("font-weight","bold").hover(function(){this.style.color="white"},function(){this.style.color="#CCCCCC"});b.append(c).append(d);jQuery("div.descriptionwrapper").prepend(b);s(a)});this.ajaxFunction.push(function(a){if(is_blogger_fullpage()==true){var b=generateBreadcrumbs();if(b!=""){jQuery("h2.date-header:first").append(jQuery(b))}}s(a)});this.ajaxFunction.push(function(c){var d=jQuery("div#sidebar > div.widget");var e=jQuery("<div>-</div>").addClass("widget-toggle").attr("title","close").click(function(){var a=jQuery(this);var b=a.parents("div.widget:first").children("div.widget-content:first");if(a.hasClass("closed")){b.show();a.removeClass("closed");a.html("-");a.attr("title","open")}else{b.hide();a.addClass("closed");a.html("+");a.attr("title","close")}}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")});for(var i=0;i<d.length;i++){var f=d.eq(i).children("h2:first");var g=$.trim(f.html());var b=e.clone(true);f.prepend(b);f.addClass("toggle-setup");var h=(f.nextAll(".widget-content").css("display")=="none");if(h)b.click()}s(c)});this.ajaxFunction.push(function(f){if(is_blogger_search()==true||is_blogger_label()==true||is_blogger_archive()==true){s(f);return}getScript("http://s7.addthis.com/js/250/addthis_widget.js#username=pulipuli",function(){addthis_config={services_compact:'plurk,twitter,facebook,hemidemi,funp,delicious,digg,blogger,readitlater,evernote,googlebuzz,googlereader,igoogle,messenger,email,print'};var a=jQuery("div#main h3.entry-title a");for(var i=0;i<a.length;i++){var b=a.eq(i).attr("href");var c=a.eq(i).html();var d=jQuery("<div></div>").addClass("share-buttons").insertBefore(a.eq(i).parents("div.post:first").find("div.post-header-line-1"));var e=jQuery('<div class="add-this">'+'<a addthis:title="'+c+'" addthis:url="'+b+'" class="addthis_button">'+'<img src="http://s7.addthis.com/static/btn/sm-share-en.gif" alt="分享並加入書籤" style="border:0"/></a></div>').appendTo(d)}s(f)})});this.ajaxFunction.push(function(a){if(is_blogger_fullpage()==false){getScript("http://pulipuli.blogspot.com/feeds/posts/summary/?alt=json-in-script&callback=handlePostspulipuli",function(){getScript("http://pulipuli.blogspot.com/feeds/comments/full?alt=json-in-script&callback=handleCommentspulipuli",function(){getScript('http://pulipuli.blogspot.com/feeds/113544406852218769/comments/full?alt=json-in-script&callback=handleGuestbookPulipuli',function(){s(a)})})})}else{setTimeout(function(){getScript("http://pulipuli.blogspot.com/feeds/posts/summary/?alt=json-in-script&callback=handlePostspulipuli",function(){getScript("http://pulipuli.blogspot.com/feeds/comments/full?alt=json-in-script&callback=handleCommentspulipuli",function(){getScript('http://pulipuli.blogspot.com/feeds/113544406852218769/comments/full?alt=json-in-script&callback=handleGuestbookPulipuli')})})},10000);s(a)}});this.ajaxFunction.push(function(b){if(is_blogger_search()==true||is_blogger_label()==true||is_blogger_archive()==true){s(b);return}var c=function(){var a='<iframe src="http://www.plurk.com/getWidget?uid=1422855&h=200&w=200&u_info=2&bg=5A3818&tl=FFF7EF" width="200" frameborder="0" height="200" scrolling="no"></iframe>';jQuery("div#plurkDiv").hide().html(a).attr("style","width: 200px; height: 200px; margin-bottom: 10px;").slideDown()};if(is_blogger_fullpage()==true){setTimeout(c,10*1000)}else c();s(b)});this.ajaxFunction.push(function(a){if(is_blogger_fullpage()){jQuery(".post-body").addClass("show-linkwithin")}s(a)});var t=function(a,i){if(a.length==0)return;this.func=a.pop();this.func(function(){i++;setTimeout(function(){t(a,i)},100)})};this.ajaxFunction.reverse();setTimeout(function(){t(this.ajaxFunction,0)},0)}$(function(){blogAjax()});